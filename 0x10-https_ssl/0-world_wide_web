#!/usr/bin/env bash
# Script to display information about subdomains of a domain

# Function to perform DNS lookup and display information
get_domain_info() {
    local domain=$1
    local subdomain=$2
    local record_type
    local destination

    if [[ -n $subdomain ]]; then
        record_type=$(dig $subdomain.$domain | awk '/ANSWER SECTION:/{getline; print $4}')
        destination=$(dig $subdomain.$domain | awk '/ANSWER SECTION:/{getline; getline; print $5}')
        echo "The subdomain $subdomain is a $record_type record and points to $destination"
    else
        subdomains=("www" "lb-01" "web-01" "web-02")
        for sub in "${subdomains[@]}"; do
            record_type=$(dig $sub.$domain | awk '/ANSWER SECTION:/{getline; print $4}')
            destination=$(dig $sub.$domain | awk '/ANSWER SECTION:/{getline; getline; print $5}')
            echo "The subdomain $sub is a $record_type record and points to $destination"
        done
    fi
}

# Main script logic
if [[ $# -lt 1 ]]; then
    echo "Usage: $0 <domain> [subdomain]"
    exit 1
fi

domain=$1
subdomain=$2

get_domain_info $domain $subdomain
